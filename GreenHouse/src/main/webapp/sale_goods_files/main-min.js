/*! Sell 2016-12-27 20:18 */
KISSY.add("v2/source/service/treelayer",function(a,b,c){function d(b,d){if(d&&(!d.items||0!==d.items.length))for(var e=0,f=d.items.length;f>e;e++){var g=d.items[e];if(!g)return;var h=g.items&&g.items.length>0,i=(a.now(),new c.Node({content:g.text,expanded:!1,isLeaf:!h,tree:b}));h&&(i.subData=g),i.set("valueId",g.value),b.addChild(i)}}function e(){var b=e.timer;b&&b.cancel(),e.timer=a.later(function(){var a=j.get("contentEl"),b=i.get("el"),c=b.height();m.height(a,"auto"),c>p&&m.height(a,p)},100)}function f(b){b.on("afterRenderUI",function(){var c=b.get("children");a.each(c,function(a){if(!a.subData){var b=a.get("el");m.addClass(b,"alone-item")}})}),b.on("expand",function(a){var b=a.target,c=b.subData;c&&(delete b.subData,d(b,c))}),b.on("collapse expand",function(){e()}),b.on("click",function(c){var d=c.target,e=d.get("content"),f=d.get("valueId");b.fire("select",{selectedItem:d,text:a.unEscapeHTML(e),value:f}),j.hide()}),b.on("select",function(a){m.val(l,a.text);var c=b.get("selectedItem");c&&c.set("selected",!!a.selectedItem)}),b.on("defaultSelect",function(c){var d=a.unEscapeHTML(c.text);l.defaultValue=d,b.fire("select",{text:d,value:c.value})}),6===a.UA.ie&&b.on("afterRenderUI",function(){g(b)})}function g(b){var c=b.get("el"),d=b.get("children");n.on(c.one(".ks-tree-row"),"mouseenter mouseleave",function(a){var b="mouseenter"==a.type?"addClass":"removeClass";m[b](a.currentTarget,"ks-tree-row-hover")}),d&&0!==d.length&&a.each(d,function(a){g(a)})}function h(a){a?m.addClass(k,"sim-loading"):m.removeClass(k,"sim-loading")}var i,j,k,l,m=a.DOM,n=a.Event,o='<div class="sim-select" id="simselect"><input type="text" class="sim-select-input" readonly="readonly" /><div class="sim-select-icon"></div></div>',p=280;return{render:function(e,g){return i&&j?{tree:i,layer:j}:(k=m.create(o),l=m.get(".sim-select-input",k),j=new b.Popup({trigger:k,triggerType:"click",elCls:"sim-select-list",align:{node:k,points:["bl","tl"]}}),i=new c({content:"\u5e97\u94fa\u5206\u7c7b",expanded:!0,showRootNode:!1}),n.on(window,"resize",function(){j.set("align",{node:k,points:["bl","tl"]})}),j.on("afterRenderUI",function(){var b=j.get("contentEl"),c=j.get("el");m.unselectable(c),n.on(document,"click",function(a){var b=a.target;m.contains(c[0],b)||m.contains(k,b)||j.hide()}),h(!0),a.io({url:g.api,cache:!1,dataType:"json",success:function(a){h(!1),d(i,a),i.set("render",b),i.render()}})}),f(i),m.append(k,e),m.addClass(e,"rendered"),{tree:i,layer:j})}}},{requires:["overlay","tree"]}),KISSY.add("v2/source/service/searcharea",function(a,b){function c(a){f.val(a,"")}function d(a){f.prop(a,"checked",!1)}function e(a){var b=a.options&&a.options[0];b.selected=!0}var f=a.DOM,g=a.Event;return{init:function(){var b=this,c=f.get(".search-form"),d=f.get(".aslink",c);this.renderTreeLayer(d),d&&this.renderForm(d,c);var e=f.get("#J_RecommendTrigger");e&&a.use("overlay",function(a,c){b.bindRecommend(e,c)})},bindRecommend:function(a,b){var c=f.html(f.get("#J_RecommendDetail")),d=new b({elCls:"recommend-dialog",content:c,align:{node:window,points:["tc","tc"],offset:[-10,20]},mask:!0,closable:!0,zIndex:999999}),e=f.get("#J_RecommendTrigger");if(e){d.on("show",function(){this.set("align",{node:window,points:["tc","tc"],offset:[-10,20]})}),g.on(e,"click",function(){d.show()})}},renderForm:function(b,h){var i=f.filter("input,select",function(b){var c=b.tagName.toLowerCase();return a.inArray(c,["select","input"])},h);g.on(b,"click",function(b){b.preventDefault(),a.each(i,function(a){var b=a.tagName.toLowerCase();if("input"==b)switch(a.type){case"text":f.hasClass(a,"sim-select-input")||c(a);break;case"checkbox":d(a)}else"select"===b&&"J_HideCateIdInShop"!==a.id&&e(a)})})},renderTreeLayer:function(a){var c=f.get("#J_ItemSort");if(c){var d=f.get("#J_HideCateIdInShop"),e=f.get("#J_HideCateNameInShop"),h={api:f.attr(d,"data-url")},i=b.render(c,h),j=i.tree,k=d.options[0],l={text:f.text(k),value:f.val(k),selected:!0};j.on("select",function(a){try{d.options.length=0}catch(b){}var c=a.text,g=new Option(c,a.value,!0,!0);d.appendChild(g),f.val(e,c)}),g.on(a,"click",function(){j.fire("select",{text:"\u5168\u90e8\u5206\u7c7b",value:""})}),j.fire("defaultSelect",l)}}}},{requires:["./treelayer"]}),KISSY.add("v2/source/service/lessquantity",function(a){function b(){if(!e)return!1;var a=new e;return b=function(){return a},a}function c(c,d){var e=b();e.set("align",{node:c,points:["tl","bl"],offset:[-100,-8]}),e.set("content",a.substitute(h,{url:d})),e.show()}function d(b,f){a.use("overlay",function(a,g){e=g,(d=c)(b,f)})}var e,f=a.DOM,g=a.Event,h='<div class="less-tip"><i class="icon icon-tip"></i>\u60a8\u7684\u5b9d\u8d1d\u662f<a href="//service.taobao.com/support/knowledge-5425552.htm" target="_blank">\u4ed8\u6b3e\u51cf\u5e93\u5b58<i class="icon icon-help-s"></i></a>\uff0c\u8bf7\u5230<a href="{url}" target="_blank">\u7f16\u8f91\u9875\u9762</a>\u4fee\u6539\u5e93\u5b58\u3002</div>';return{init:function(){var c=f.get("#J_DataTable"),e=f.query("div.J_LessQuantity",c);e&&0!==e.length&&(g.on(e,"click",function(a){a.halt();var b=a.currentTarget;d(b,f.attr(b,"data-url"))}),g.on(window,"resize",function(){var c=b();c&&c.set("align",a.clone(c.get("align")))}))}}}),KISSY.add("v2/source/service/itemoperator",function(a,b){function c(){if(!b)return!1;var a=new b({prefixCls:"sale-",elCls:"itemtip-layer"});return a.on("afterRenderUI",function(){var b=a.get("el"),c='<div class="arrow arrow-right"><i class="outer"></i><i class="inner"></i></div>';b.append(g.create(c))}),c=function(){return a},a}function d(a){var b=c(),d=g.attr(a,"data-hint")||g.attr(a,"title");d&&(b.set("align",{node:a,points:["tl","tr"],offset:[10,-8]}),b.set("content",d),b.show())}function e(c){a.use("overlay",function(a,f){b=f,(e=d)(c)})}function f(){var a=c();a&&a.hide()}var g=a.DOM,h=a.Event;return{init:function(){var a=g.query("div.J_ChangeCate");h.on(a,"mouseenter",function(a){a.halt();var b=a.currentTarget;e(b)}),h.on(window,"resize",function(){f()}),h.on(a,"mouseleave",function(a){a.halt(),f()})},bindHover:function(){var b=g.query("div.J_Pandbox"),c=null;h.on(b,"mouseenter",function(a){a.halt();var b=a.currentTarget;c&&c.cancel(),g.addClass(b,"pand-hover")}),h.on(b,"mouseleave",function(b){var d=b.currentTarget;c=a.later(function(){g.removeClass(d,"pand-hover"),c=null},300)})}}}),KISSY.add("v2/source/service/itemsmanager",function(a){function b(b){var c=f.query(".selector","#J_DataTable"),d=[];return a.each(c,function(a){var c=f.val(a);if(f.prop(a,"checked")){if(b&&!b(a,c))return;d.push(c)}}),d}function c(c,d){var e=(h[d]||{}).filter,g=f.attr(c,"data-id")||b(e);return a.makeArray(g)}function d(a,b){var c=h[a],d=c.unselect;return b.items&&0!=b.items.length?void c.submit(b):(d&&d.call(c),!1)}function e(b,c){if(!b)return"";var d=-1!=b.indexOf("?")?"&":"?",e=a.param(c);return b+d+e}var f=a.DOM,g=a.Event,h={vip:{unselect:function(){alert("\u8bf7\u9009\u4e2d\u8981\u8bbe\u7f6e\u4e3aVIP\u7684\u5b9d\u8d1d\uff01")},submit:function(a){var b=f.attr(a.trigger,"data-url"),c=a.items.join(","),d=e(b,{itemIds:c});d&&window.open(d)}}};return{init:function(){var a=f.get(".J_ItemsManager");g.on(a,"click",function(a){a.preventDefault();var b=a.currentTarget,e=f.attr(b,"data-type"),g=c(b,e);d(e,{trigger:b,items:g})})}}}),KISSY.add("v2/source/localstorage",function(a){function b(){f=localStorage,g=function(a,b){f.setItem(a,b)},h=function(a){return f.getItem(a)},i=function(a){f.removeItem(a)}}function c(){var a="IELocalDataStore",b=document;f=b.createElement("input"),f.type="hidden",b.body.appendChild(f),f.addBehavior("#default#userData"),g=function(b,c){try{f.setAttribute(b,c),f.save(a)}catch(d){}},h=function(b){try{return f.load(a),f.getAttribute(b)}catch(c){}},i=function(b){try{f.removeAttribute(b),f.save(a)}catch(c){}}}function d(){"undefined"!=typeof localStorage?b():a.UA.ie<8&&c(),j=!0}function e(){j||d()}var f,g,h,i,j=!1;return{setItem:function(a,b){return e(),g(a,b)},getItem:function(a){return e(),h(a)},removeItem:function(a){return e(),i(a)}}}),KISSY.add("v2/source/service/qrcode",function(a,b,c){function d(){j&&j.cancel(),j=a.later(function(){var a=e();a&&a.hide(),j=null},300)}function e(){var a=new c({prefixCls:"hint-",elCls:"qrcode-layer hint-default"});return a.on("afterRenderUI",function(){var b=a.get("el");b.append(h.create('<div class="arrow arrow-left"><i class="outer"></i><i class="inner"></i></div>')),b.on("mouseenter",function(){j&&j.cancel()}),b.on("mouseleave",function(){d()})}),e=function(){return a},a}function f(a){var b=e()||{},c=b.get("align");b&&(a||c)&&(b.set("align",{node:a||c&&c.node,points:["cr","tl"],offset:[10,-20]}),b.show())}function g(b,c,d){var g=e(),h=b+(b.indexOf("?")>=0?"&":"?")+c;g.set("content",a.substitute(k,{image:h})),f(d)}var h=a.DOM,i=a.Event,j=null,k='<div class="link-bar"><a class="download-link" href="{image}&download=true" target="_blank">\u4e0b\u8f7d\u6807\u7b7e</a></div><img src="{image}" width="200" height="200" alt="\u4e8c\u7ef4\u7801" />';return{init:function(){var a=Sell.Config.get("QRCode");if(a){var b=h.query(".J_QRCode"),c=null;i.on(b,"mouseenter",function(b){var d=b.currentTarget,e=h.attr(d,"data-param");j&&j.cancel(),c!=e?(g(a.getQRUrl,e,d),c=e):f(d)}),i.on(b,"mouseleave",function(){d()})}}}},{requires:["v2/source/localstorage","overlay"]}),KISSY.add("v2/source/service/recommend",function(a){function b(b,d){var e=c.val(b);return""==e?void alert("\u8bf7\u9009\u62e9\u63a8\u8350\u987a\u5e8f"):void a.io({url:d,dataType:"json",type:"post",data:{order:e},success:function(a){return a.result?void location.reload():void alert(a.msg)},error:function(){alert("\u6a71\u7a97\u8bbe\u7f6e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002")}})}var c=a.DOM,d=a.Event,e='<div class="msg-block"><div class="msg-attention"><i class="icon icon-attention"></i>\u6279\u91cf\u8bbe\u7f6e\u6a71\u7a97\u63a8\u8350\u540e\uff0c\u5c06\u4f1a\u8986\u76d6\u60a8\u539f\u6765\u63a8\u8350\u7684\u5b9d\u8d1d\u3002</div></div><label for="">\u5b9d\u8d1d\u63a8\u8350\u987a\u5e8f\uff1a</label><select name="recommendorder" id="J_RecommendOrder"><option value="">--</option></select>',f='<button type="button" class="btn btn-primary"><p class="btn-txt">\u786e\u5b9a</p></button><a class="btn-cancel" href="#">\u53d6\u6d88</a>';return{init:function(){var g=Sell.Config.get("recommend"),h=c.get("#J_RecommendSetting"),i=g&&g.url;if(g&&h){{var j=c.get(".J_PopButton");c.get(".pop-wrap",j)}d.on(j,"mouseenter mouseleave",function(a){var b=a.type;"mouseenter"===b?c.addClass(j,"wrap-hover"):c.removeClass(j,"wrap-hover")}),a.use("overlay",function(c,j){var k=new j.Dialog({width:380,prefixCls:"hint-",elCls:"hint-layer hint-recommendsetting",headerContent:"\u6a71\u7a97\u8bbe\u7f6e",bodyContent:e,footerContent:f});k.on("afterRenderUI",function(){var c=k.get("body"),d=k.get("footer"),e=c.one("#J_RecommendOrder")[0],f=d.one(".btn-primary"),h=d.one(".btn-cancel");h.on("click",function(a){a.halt(),k.hide()}),f.on("click",function(a){a.halt(),b(e,i)}),e&&g.options&&a.each(g.options,function(a){var b=new Option(a.text,a.value,!1,!1);e.options.add(b)})}),d.on(h,"click",function(a){a.halt(),k.set("align",{points:["cc","cc"]}),k.show()})})}}}}),KISSY.add("v2/source/calendar",function(a,b){function c(a,b){return a[0]>b[0].x&&a[0]<b[1].x&&a[1]>b[0].y&&a[1]<b[1].y}function d(d){var e=a.merge(k,d),i=a.all('<div id="'+e.id+'" style="z-index:999910;visibility:hidden; left:0;top:0;position:absolute;"></div>').appendTo(document.body),j=new b(i,{triggerType:["click"]}).on("select",function(b){if(!this.showTime){var c=this.currentTrigger;c.value=a.Date.format(b.date,e.dateFormat),h.fire(c,"valuechange"),f(j)}}).on("timeSelect",function(b){var c=this.currentTrigger;c.value=a.Date.format(b.date,e.timeFormat),h.fire(c,"valuechange"),f(j)});return h.on(document,"click",function(a){var b=a.target;"hidden"==j.con.css("visibility")||j.currentTrigger==b||j.con[0]==b||g.contains(i,b)||(!j.con.contains(b)||"option"!==b[0].nodeName.toLowerCase()&&"select"!==b[0].nodeName.toLowerCase())&&(c([a.pageX,a.pageY],[{x:j.con.offset().left,y:j.con.offset().top},{x:j.con.offset().left+j.con.width(),y:j.con.offset().top+j.con.height()}])||f(j))}),j}function e(a,b){a.con.css("display","block");var c=g.offset(b);c.top+=g.outerHeight(b),a.currentTrigger=b,a.con.offset(c).css("visibility","visible")}function f(a){a.con.css("display","none"),a.hide()}var g=a.DOM,h=a.Event,i="disabled",j="readonly",k={id:"singleCalendar",dateFormat:"yyyy-mm-dd",timeFormat:"yyyy-mm-dd HH:MM:ss"};return{init:function(b){b&&0!==b.length&&a.each(b,function(b){var c=b.targets;delete b.targets;var k=d(b);a.each(c,function(a){var b=g.query(a.elements),c=a.triggerTypes||["click"];h.on(b,c[0],function(b){var c=b.currentTarget;g.prop(c,i)||g.prop(c,j)||(k.render({showTime:"time"==a.type}),e(k,c))}),c[1]&&h.on(input,c[1],function(){f(k)})})})}}},{requires:["calendar"]}),KISSY.add("v2/source/service/page",function(a,b,c){var d=a.all,e=a.IO;return a.ready(function(){var c=b.get(".enter-trash");if(c){var d=13785696e5,e=a.now();e>d||a.use("overlay",function(a,b){var d=new b({prefixCls:"hint-",elCls:"hint-guide hint-trashguide",content:"\u70b9\u51fb\u6b64\u5904\uff0c\u627e\u56de\u5df2\u5220\u9664\u7684\u5b9d\u8d1d\uff01",closable:!0,width:260,align:{node:c,points:["tr","br"],offset:[-20,-10]}});d.on("afterRenderUI",function(){var a=d.get("el");a.append('<div class="arrow arrow-down"><i class="outer"></i><i class="inner"></i></div>')}),d.show()})}}),a.ready(function(){var a=[{targets:[{elements:".J_CalendarDate",type:"date"},{elements:".J_CalendarTime",type:"time"}]}];c.init(a)}),{init:function(){var a=Sell.Config.get("chiSeller");a&&a.url&&new e({url:window.location.protocol+a.url,type:"get",dataType:"jsonp",success:function(a){if(a&&a.success){var b,c=d("#hd-tip"),e=['<div class="box bulletin">','<div class="hd"><b class="bulb-icon"></b><span class="title">\u63a8\u5e7f</span></div>','<div class="bd">',"<ul>","<li>"+a.content+' <a href="'+a.url+'" target="_blank">'+a.urlTitle+'</a><b class="close-icon">x</b></li>',"</ul>","</div>","</div>"];1===c.length?(e.unshift('<div class="separator"></div>'),b=d(e.join("")),c.after(b)):(b=d(e.join("")),d("#main-content").prepend(b)),b.all(".close-icon").on("click",function(){b.hide()})}}})}}},{requires:["dom","../calendar"]}),KISSY.add("v2/source/service/mobileDesc",function(a,b){function c(a,b){j.set("content",a),j.set("align",{node:b,points:["cr","cl"],offset:[10,0]});var c=j.get("el").one(".mobile-close");c&&c.on("click",function(){j.hide()}),j.show()}function d(){i=setTimeout(function(){j.hide(),i=null},300)}function e(a){a.on("mouseover",function(){i&&(clearTimeout(i),i=null);var a=h(this).attr("alt"),b=h(this).attr("data-link");b&&(a+='&nbsp;<a href="'+b+'" target="_blank">&gt;&gt;\u7acb\u523b\u7f16\u8f91</a>'),c(a,h(this))}),a.on("mouseout",d)}function f(a){a.each(function(a){if(h(a).parent(".mobile-noedit-first")){var b=h(this).attr("data-link")||"",d="";b&&(d+='&nbsp;<a href="'+b+'" target="_blank">&gt;&gt;\u7acb\u523b\u7f16\u8f91</a>');var e='<div class="noedit-firest"> '+h(a).attr("alt")+d+'<a class="mobile-close"></a></div>';h(a).on("mouseover",function(){c(e,h(a))})}})}function g(){j.get("el").append(h('<div class="arrow arrow-left"><i class="outer"></i><i class="inner"></i></div>')),j.get("el").on("mouseover",function(){i&&(clearTimeout(i),i=null)}),j.get("el").on("mouseout",function(){j.get("el").one(".noedit-firest")||d()})}var h=a.all,i=null,j=new b({prefixCls:"hint-",elCls:"mobile-desc hint-default hint-overlay",mask:!1,closable:!1,closeAction:"destroy"});return{init:function(){var a=Sell.Config.get("MobileDesc");a&&(j.on("afterRenderUI",function(){var a=h(".j_MobileNoEdit"),b=h(".j_MobileHasEdit");g(),a.length&&(e(a),f(a)),b.length&&e(b)}),j.render())}}},{requires:["overlay"]}),KISSY.add("v2/source/service/weituan",function(a,b){var c=a.all;return{init:function(){var a=c(".J_WeiTuan");if(a.length){var d=new b({prefixCls:"hint-",elCls:"weituan hint-default hint-overlay",content:'\u8bbe\u7f6e\u5fae\u56e2\uff0c\u8ba9\u8001\u5ba2\u6237\u5e2e\u4f60\u62c9\u65b0\u5ba2\u6237<a class="close"></a>',align:{node:c(".J_WeiTuan")[0],points:["cl","cr"],offset:[-10,0]},mask:!1,closable:!1,closeAction:"destroy"});d.on("afterRenderUI",function(){var a=c(d.get("el"));a.append(c('<div class="arrow arrow-right"><i class="outer"></i><i class="inner"></i></div>')),a.on("click",function(a){c(a.target).hasClass("close")&&d.hide()}),setTimeout(function(){d.show()},500)}),d.render()}}}},{requires:["overlay"]}),KISSY.add("v2/source/other/goodsRecommend",function(a,b,c){function d(a,b){var c=0,d=document.ListForm.elements;for(i=0;i<d.length;i++)"checkbox"==d[i].type&&"productID"==d[i].name&&d[i].checked&&c++;if(c>20)return void alert("\u6279\u91cf\u64cd\u4f5c\u53ea\u80fd\u64cd\u4f5c20\u4e2a\uff0c\u8bf7\u51cf\u5c11\u9009\u4e2d\u7684\u5b9d\u8d1d\u518d\u64cd\u4f5c\uff01");if(0==c&&alert("\u8bf7\u9009\u62e9\u60a8\u8981\u53d6\u6d88\u63a8\u8350\u7684\u5b9d\u8d1d\uff01"),"doupromoted"==a){for(i=0;i<d.length;i++)if("checkbox"==d[i].type&&"productID"==d[i].name&&d[i].checked&&d[i].getAttribute("promoted")<="0")return alert("\u8be5\u9009\u5b9d\u8d1d\u8fd8\u672a\u88ab\u63a8\u8350\uff0c\u4e0d\u80fd\u53d6\u6d88\u63a8\u8350\uff01"),void d[i].focus();confirm("\u60a8\u786e\u5b9a\u8981\u53d6\u6d88\u63a8\u8350\u8fd9\u4e9b\u5b9d\u8d1d\u5417\uff1f")&&(document.ListForm.elements.action.value="goods/goods_item_action",document.ListForm.event_submit_do_unrecommend.value="anything",document.ListForm.submit())}else if("dopromoted"==a){var e=0,f=b.promote_limit-b.promoted;for(i=0;i<d.length;i++)if("checkbox"==d[i].type&&"productID"==d[i].name&&d[i].checked){if("1"==d[i].getAttribute("promoted"))return alert("\u8be5\u9009\u5b9d\u8d1d\u5df2\u7ecf\u88ab\u63a8\u8350\uff0c\u4e0d\u80fd\u518d\u6b21\u63a8\u8350\uff01"),void d[i].focus();e++}e>f?alert("\u60a8\u6700\u591a\u53ea\u80fd\u518d\u63a8\u8350 "+f+" \u4ef6\u5b9d\u8d1d\uff01"):(document.ListForm.elements.action.value="goods/goods_item_action",document.ListForm.event_submit_do_recommend.value="anything",document.ListForm.submit())}}function e(a){if(isNaN(a))return!1;var b=parseInt(a);return b.toString().length==a.length?!0:!1}function f(a,b){return null==a||""==a?(alert("\u9875\u53f7\u65e0\u6548\uff01"),!1):e(a)?a==b.currentPage?!1:a>b.lastPage?(alert("\u9875\u53f7\u8d85\u51fa\u6700\u5927\u9875\u53f7\uff01"),!1):a<b.firstPage?(alert("\u9875\u53f7\u8d85\u51fa\u6700\u5c0f\u9875\u53f7\uff01"),!1):!0:(alert("\u9875\u53f7\u5fc5\u987b\u4e3a\u6574\u6570\uff01"),!1)}function g(a,b){f(a,b)&&(document.ListForm.page.value=a,document.ListForm.submit())}var h=b.all,j=function(a){{var b=h("#J_DataTable input.selector");h("#J_DataTable input.all-selector")}if(a){var c=this[0];b.each(function(a){a[0].checked=c.checked})}};return{init:function(){var a=Sell.Config.get("GoodsRecommend");if(a){var b=h("#J_Cancel");b.on("click",function(){d("doupromoted",a)});var e=h("#J_Page");e[0]&&e.all("a").on("click",function(){var b=h(this).attr("href");return g(b.substring(1),a),!1});var f=h("#J_DataTable");f[0]&&f.on("click",function(a){var b=h(a.target);switch(!0){case b.hasClass("all-selector"):j.call(b,!0);break;case b.hasClass("selector"):j.call(b);break;case b.hasClass("J_OnSale"):}});var i=h("#J_ToggleBoxTrigger");i[0]&&i.on("click",function(){var a=h(this).parent().prev(),b=h(this);return a.hasClass("bd")&&(b[b.hasClass("collapsed")?"removeClass":"addClass"]("collapsed"),a[b.hasClass("collapsed")?"addClass":"removeClass"]("hidden")),!1});var k=h("#J_RecommendDetail").html(),l=new c({elCls:"recommend-dialog",content:k,align:{node:window,points:["tc","tc"],offset:[-10,20]},mask:!0,closable:!0}),m=h("#J_RecommenTotal");if(m[0]){var n=null;m.on("mouseover",function(){n=setTimeout(function(){l.show(),n=null},200)}),m.on("mouseout",function(){clearTimeout(n),n=null})}}}}},{requires:["node","overlay"]}),KISSY.add("v2/source/com/dialog",function(a,b,c,d){function e(){this._init.apply(this,arguments)}var f={type:"confirm",yesLabel:"\u786e\u5b9a",noLabel:"\u53d6\u6d88",closeAction:"hide",zIndex:2e4},g="tbs-dialog-btn-yes",h="tbs-dialog-btn-no",i='<div class="tbs-dialog {cls}"><div class="tbs-dialog-head">{head}</div><div class="tbs-dialog-body">{body}</div><div class="tbs-dialog-foot">{foot}</div></div>',j={confirm:{cls:"tbs-dialog-confirm",foot:'<button class="btn btn-primary btn-sm '+g+'"><span class="btn-txt">{yesLabel}</span></button><button class="btn btn-naked btn-sm '+h+'"><span class="btn-txt">{noLabel}</span></button>'},alert:{cls:"tbs-dialog-alert",foot:'<button class="btn btn-primary btn-sm '+g+'"><span class="btn-txt">{yesLabel}</span></button>'},popup:{cls:"tbs-dialog-popup"}};return a.augment(e,a.EventTarget,{_init:function(b){var c=a.merge(f,b);this.cfg=c,this.layer=new d(this._parseConfig()),this._bindEvent()},_parseConfig:function(){var a=this.cfg;return this._initTempl(),{prefixCls:"tbs-",elCls:a.cls,content:this._wrapTempl,mask:!0,closable:!0,closeAction:a.closeAction,zIndex:a.zIndex,align:{points:["cc","cc"]}}},_initTempl:function(){var b,c=this.cfg,d=c.type,e=j[d],f={};a.each(e,function(b,d){var e=c.templates||{};f[d]=a.substitute(e[d]||b,c)}),b=a.substitute(i,f),this._wrapTempl=b},_bindEvent:function(){var a=this,c=this.layer,d=a.cfg;c.on("afterRenderUI",function(){a.elWrap=c.get("el")[0],a.elBody=b.get(".tbs-dialog-body",a.elWrap),a.elHead=b.get(".tbs-dialog-head",a.elWrap),a.elFoot=b.get(".tbs-dialog-foot",a.elWrap),a.setContent(d.content),a.setCaption(d.caption),a.setFoot(d.foot),a._bindElement()})},_bindElement:function(){var a=this,d=a.elWrap,e=b.get("."+g,d),f=b.get("."+h,d),i=[];e&&i.push(e),f&&i.push(f),i.length>0&&c.on(i,"click",function(c){var d=c.currentTarget,e=b.hasClass(d,g);a.fire("confirm",{result:e})!==!1&&a.hide()}),c.on(a.elHead,"click",function(b){var c=b.target;a.fire("headClick",{proxyEvent:b,elem:c})}),c.on(a.elFoot,"click",function(b){var c=b.target;a.fire("footClick",{proxyEvent:b,elem:c})}),c.on(a.elBody,"click",function(b){var c=b.target;a.fire("bodyClick",{proxyEvent:b,elem:c})})},setContent:function(a){this.elBody?b.html(this.elBody,a):this.cfg.content=a},setCaption:function(a){this.elHead?b.html(this.elHead,a):this.cfg.caption=a},setFoot:function(a){this.elFoot?b.html(this.elFoot,a):this.cfg.foot=a},show:function(){this.layer.show()},hide:function(){this.layer.hide()}}),e.confirm=function(a,b,c){var d=new e({caption:b||"\u7f51\u9875\u63d0\u793a",content:a||"",closeAction:"destroy"});return d.show(),c&&d.on("confirm",function(a){c({result:a.result})}),d},e.alert=function(a,b,c){var d=new e({type:"alert",caption:b||"\u7f51\u9875\u63d0\u793a",content:a||"",closeAction:"destroy"});return d.show(),c&&d.on("confirm",function(a){c({result:a.result})}),d},e.prompt=function(c,d,f,g){var h='<div>{text}</div><input type="text" value="{value}" />',i=new e({type:"confirm",caption:f||"\u7f51\u9875\u63d0\u793a",content:a.substitute(h,{text:c,value:d}),closeAction:"destroy"});return i.show(),g&&i.on("confirm",function(a){var c=b.get("input",i.elBody),d=b.val(c);g({result:a.result,value:d})}),i},e},{requires:["dom","event","overlay"]}),KISSY.config({packages:[{name:"kg",path:"//g.alicdn.com/"}]}),KISSY.add("v2/source/service/hqGoods",function(a,b,c,d,e,f,g){function h(a,b){var c=b||window.location.href,d=encodeURIComponent(a)+"=",e=c.indexOf(d),f=null;if(e>-1){var g=c.indexOf("&",e);-1==g&&(g=c.length),f=decodeURIComponent(c.substring(e+d.length,g))}return f}function i(){var a=new Date,b=a.getHours(),c=a.getMinutes(),d=a.getSeconds(),e=10>b?"0"+b:b,f=10>c?"0"+c:c,g=10>d?"0"+d:d;return e+":"+f+":"+g}var j=b,k=c.all,l=h("isPre",location.href),m=-1!==location.host.indexOf("daily.taobao.net")?"daily.taobao.net/":"taobao.com/",n="true"==l?"pre.":"",o=window.location.protocol,p={getUploadPic:o+"//"+n+"goldwindow."+m+"getUploadPic.do",uploadPic:o+"//"+n+"goldwindow."+m+"uploadPic.do",HqGoodsNum:o+"//"+n+"goldwindow."+m+"jpccCount.do",itemOperation:o+"//"+n+"goldwindow."+m+"itemOperation.do",jpccAwardDetail:o+"//"+n+"goldwindow."+m+"jpccAwardDetail.do",shopSevenDayAvg:o+"//"+n+"goldwindow."+m+"shopSevenDayAvg.do",shopFifteenDays:o+"//"+n+"goldwindow."+m+"shopFifteenDays.do",itemYesterday:o+"//"+n+"goldwindow."+m+"itemYesterday.do",itemFifteenDays:o+"//"+n+"goldwindow."+m+"itemFifteenDays.do"},q={detailTpl:'<div class="hq-detail-table-area">       {tips}        <table class="hq-detail-table">           <thead>               <th width="50%">\u51c6\u5165\u6761\u4ef6</th>               <th width="50%">\u60a8\u7684\u72b6\u6001</th>           </thead>           <tbody>              {accessConditions}           </tbody>       </table>        <table class="hq-detail-table">           <thead>               <th width="50%">\u89c4\u5219\u5185\u5bb9</th>               <th width="30%">\u60a8\u7684\u72b6\u6001</th>               <th width="20%">\u5956\u52b1\u6570\u76ee</th>           </thead>           <tbody>              {awardConditions}           </tbody>       </table>   </div>',shopDataTpl:'<div class="hq-detail-data-area J_HqDataArea">   <div class="hq-data-tab">    <ul class="hq-data-tab-list">      <li class="hq-data-tab-item hq-tab-item-selected">\u641c\u7d22\u76f8\u5173\u7684\u6570\u636e</li>    </ul>  </div>  <div class="hq-data-intro">    <p class="hq-intro-con">    \u63d0\u5347\u6548\u679c\u4e0e\u5546\u54c1\u81ea\u8eab\u8d28\u91cf\u6709\u5173\uff0c\u8bf7\u8bbe\u7f6e\u5f53\u5b63\u4f18\u8d28\u5546\u54c1\u4e3a\u7cbe\u54c1\u6a71\u7a97\uff0c\u5e76\u53ca\u65f6\u8fdb\u884c\u5408\u7406\u8c03\u6574\uff01    \u636e\u6d4b\u8bd5\u671f\u7edf\u8ba1\uff0c\u8bbe\u7f6e\u7cbe\u54c1\u6a71\u7a97\u540e\u5546\u54c1\u7684\u641c\u7d22\u66dd\u5149\u7387\u5e73\u5747\u53ef<span class="red">+30%</span> \u641c\u7d22\u5f15\u5bfc\u6d4f\u89c8\u6b21\u6570\u5e73\u5747<span class="red">+15%</span>    \u641c\u7d22\u5f15\u5bfc\u6210\u4ea4\u91d1\u989d\u5e73\u5747<span class="red">+8%</span>    </p> </div>  <div class="hq-data-chart-area">    <div class="hq-data-tab">      <ul class="hq-data-tab-list">        <li class="hq-data-tab-item">\u8fd115\u5929\u5168\u5e97\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e</li>      </ul>      <select class="hq-data-type J_DataTypeSelect">      {typeOptions}      </select>    </div>    <div class="hq-chart-main" id="J_ChartsMain">    </div>  </div>  <div class="hq-data-table-area">    <div class="hq-data-tab">      <ul class="hq-data-tab-list">        <li class="hq-data-tab-item">\u8fd17\u5929\u5168\u5e97\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u65e5\u5747\u6570\u636e</li>      </ul>    </div>    <div class="hq-table-main">      <table class="hq-table">        <tr>          <th>\u7edf\u8ba1\u9879</th>          {typeName}        </tr>        <tr>          <td>\u672c\u5e97\u7cbe\u54c1\u6a71\u7a97</td>          {avg}        </tr>      </table>      <p class="hq-table-intro">\u4ee5\u4e0a\u4e3a\u5168\u5e97\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e\uff0c\u5982\u67e5\u770b\u5355\u4e2a\u5546\u54c1\u6570\u636e\uff0c\u53ef\u70b9\u51fb\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e\u540e\u9762\u7684\u201d\u6548\u679c\u6570\u636e\u201c</p>      <p class="hq-table-howto"><a href="http://bbs.taobao.com/catalog/thread/16029511-321777334.htm" target="_blank">\u5982\u4f55\u6709\u6548\u4f7f\u7528\u7cbe\u54c1\u6a71\u7a97\uff1f</a><a href=" //alizs.taobao.com/industry" target="_blank">\u53c2\u8003\u201c\u963f\u91cc\u884c\u4e1a\u6307\u6570\u201d\u5408\u7406\u8bbe\u7f6e\u7cbe\u54c1\u6a71\u7a97</a></p>    </div>  </div></div>',itemDataTpl:'<div class="hq-detail-data-area J_HqDataArea">  <div class="hq-data-chart-area">    <div class="hq-data-tab">      <ul class="hq-data-tab-list">        <li class="hq-data-tab-item">\u6700\u8fd1\u4e00\u6b21\u7cbe\u54c1\u6a71\u7a97\u8bbe\u7f6e\u65f6\u95f4\uff1a{setDate}</li>      </ul>      <select class="hq-data-type J_DataTypeSelect">      {typeOptions}      </select>    </div>    <div class="hq-chart-main" id="J_ChartsMain">    </div>  </div>  <div class="hq-data-table-area">    <div class="hq-data-tab">      <ul class="hq-data-tab-list">        <li class="hq-data-tab-item">\u6628\u65e5\u672c\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e</li>      </ul>    </div>    <div class="hq-table-main">      <table class="hq-table">        <tr>          <th>\u7edf\u8ba1\u9879</th>          {typeName}        </tr>        <tr>          <td>\u672c\u5546\u54c1</td>          {itemData}        </tr>        <tr>          <td>\u540c\u7c7b\u76ee\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1</td>          {cateJpccData}        </tr>        <tr>          <td>\u540c\u7c7b\u76ee\u975e\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1</td>          {cateData}        </tr>      </table>      <p class="hq-table-intro">\u4ee5\u4e0a\u8868\u683c\u6570\u636e\u4e3a\u5355\u4e2a\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6548\u679c\u6570\u636e\uff1b\u6570\u636e\u7edf\u8ba1\u65f6\u95f4\u4e3a\u524d\u4e00\u5929\u3002</p>      <div class="showpicplugin-box">\u4e3a\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u8bbe\u7f6e\u767d\u5e95\u56fe\uff0c\u589e\u52a0\u5728\u624b\u6dd8\u9996\u9875\u7684\u66dd\u5149\u673a\u4f1a\uff01<span class="showpicplugin-go J_ShowPicPluginGo">\u7acb\u5373\u8bbe\u7f6e</span> <a class="showpicplugin-link" target="_blank" href="//bbs.taobao.com/catalog/thread/16029511-321975073.htm">\u83b7\u53d6\u66f4\u591a\u66dd\u5149\u673a\u4f1a></a> </div>      <p class="hq-table-howto"><a href="http://bbs.taobao.com/catalog/thread/16029511-321777334.htm" target="_blank">\u5982\u4f55\u6709\u6548\u4f7f\u7528\u7cbe\u54c1\u6a71\u7a97\uff1f</a><a href=" //alizs.taobao.com/industry" target="_blank">\u53c2\u8003\u201c\u963f\u91cc\u884c\u4e1a\u6307\u6570\u201d\u5408\u7406\u8bbe\u7f6e\u7cbe\u54c1\u6a71\u7a97</a></p>    </div>  </div></div>'},r=null,s="",t="",u=["expclkrate_2","directledrate_4"],v=["directledamt_3"],w={init:function(){this.getHqGoodsNum(),this.bindEvent()},bindEvent:function(){var a=this,b=j.query(".J_HqSetGoods"),c=j.query(".J_HqCancelGoods"),e=j.get("#J_HqGoodsDetail"),f=j.get("#J_HqPerformanceData"),g=j.query(".J_HqShowItemPerformance");d.on(e,"click",function(b){b.preventDefault(),a.requestGoodsDetail()}),d.on(f,"click",function(b){b.preventDefault(),k("#J_ChartsMain").length>0&&k("#J_ChartsMain").remove(),s="shop",a.requestShopSevenDayAvg()}),d.on(g,"click",function(b){b.preventDefault(),k("#J_ChartsMain").length>0&&k("#J_ChartsMain").remove(),s="item",r=k(b.target).attr("data-id"),a.requestItemYesterday()}),d.delegate(document,"change",".hq-data-type",function(b){b.preventDefault(),a.requestShopFifteenDays(k(b.target)[0])}),d.on(b,"click",function(b){b.preventDefault(),r=k(b.target).attr("data-id");var c=b.currentTarget;a.eventHandler(c)}),d.on(c,"click",function(b){b.preventDefault();var c=b.currentTarget;a.eventHandler(c)}),d.delegate(document,"click",".J_HqCancelRecommend",function(b){b.preventDefault(),a.cancelRecommend()}),d.on(document,"click",function(a){var b=a.target;"J_HqGoodsSet"==j.get(b).id&&k("#J_HqGoodsQa").hasClass("hidden")?k("#J_HqGoodsQa").removeClass("hidden"):k("#J_HqGoodsQa").addClass("hidden")})},requestShopSevenDayAvg:function(){var a=this;this._request(p.shopSevenDayAvg,{},function(b){a.showShopSevenDayAvg(b)})},requestItemYesterday:function(){var a=this;this._request(p.itemYesterday,{itemId:r},function(b){a.showItemYesterday(b)})},showItemYesterday:function(b){var c=this,g="";if(b.success){g=a.substitute(q.itemDataTpl,{typeOptions:c.getTypeOptions(b.value),typeName:c.getTypeName(b.value),setDate:b.value.setDate||"\u672a\u77e5",itemData:c.getTypeValue(b.value,"itemData"),cateData:c.getTypeValue(b.value,"cateData"),cateJpccData:c.getTypeValue(b.value,"cateJpccData")});var h=new f({prefixCls:"tbs-",elCls:"tbs-dialog-popup hqgoods-updata-plugin",content:['<div class="tbs-dialog">','<div class="tbs-dialog-head">\u672c\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e\u6548\u679c</div>','<div class="tbs-dialog-body">'+g+"</div>","</div>"].join(""),mask:!0,closable:!0,closeAction:"destroy",zIndex:2e4,align:{points:["cc","cc"]}});h.show(),d.on(j.get(".J_ShowPicPluginGo"),"click",function(a){goldlog&&goldlog.record("/mjzx.32.48","","","H46747620"),a.preventDefault(),h.hide(),h.destroy(),c.showWPicPopup()}),c.requestShopFifteenDays(k(".J_DataTypeSelect")[0])}else e.alert('<p class="hq-alert-tips">'+(b.errorMessage||"\u83b7\u53d6\u672c\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e\u5931\u8d25")+"</p>","\u672c\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e\u6548\u679c")},showShopSevenDayAvg:function(b){var c=this,d="";b.success?(d=a.substitute(q.shopDataTpl,{typeOptions:c.getTypeOptions(b.value),typeName:c.getTypeName(b.value),avg:c.getTypeValue(b.value,"avg")}),e.alert(d,"\u5168\u5e97\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e\u6548\u679c"),c.requestShopFifteenDays(k(".J_DataTypeSelect")[0])):e.alert('<p class="hq-alert-tips">'+(b.errorMessage||"\u83b7\u53d6\u5168\u5e97\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e\u5931\u8d25")+"</p>","\u5168\u5e97\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u6570\u636e\u6548\u679c")},requestShopFifteenDays:function(a){var b=this,c="",d={},e=a.selectedIndex,f=a.options[e].value,g=a.options[e].text;t=f,"shop"===s?(c=p.shopFifteenDays,d={type:f}):"item"===s&&(c=p.itemFifteenDays,d={type:f,itemId:r}),this._request(c,d,function(a){b.showShopFifteenDays(a,g)})},showShopFifteenDays:function(b,c){var d={title:c,x:[],y:[],num:0},e=this;b.success&&b.value.dataItems.length>0?(d.num=b.value.dataItems,a.each(b.value.dataItems,function(a){d.x.push(a.date),d.y.push(a.num)}),e.renderCharts(d)):k("#J_ChartsMain").html('<p class="hq-chart-error">\u642c\u8fd0\u6570\u636e\u5931\u8d25~\u8bf7\u5237\u65b0\u540e\u8bd5\u8bd5\uff01</p>')},renderCharts:function(b){var c=!1;b.yTpl="",a.inArray(t,u)?(b.y=a.map(b.y,function(a){return(100*a).toFixed(2)}),b.yTpl="{{data}}%",c=!0):a.inArray(t,v)&&(b.y=a.map(b.y,function(a){return parseFloat(a).toFixed(2)})),KISSY.use("kg/kcharts/6.0.2/linechart/index",function(a,d){new d({renderTo:"#J_ChartsMain",points:{attr:{type:"auto"}},yLabels:{isShow:!0,template:b.yTpl,css:{marginLeft:"-10px",marginTop:"4px","font-family":"Microsoft Yahei","font-size":"12px",color:"#666"}},xLabels:{css:{marginTop:"5px","font-family":"Microsoft Yahei","font-size":"10px"}},title:{isShow:!1},anim:{},subTitle:{isShow:!1},xAxis:{text:b.x||[]},yAxis:{num:7},comparable:!1,series:[{isShow:!0,text:b.title,data:b.y}],legend:{isShow:!0,y:-10},tip:{offset:{x:10,y:10},template:function(a){var d="";return c&&(a.y+="%"),d+=a.x+"\u7684"+b.title+'\u4e3a\uff1a<span clas="red">'+a.y+"</span>"}}})})},getTypeOptions:function(a){var b="";if(a.items&&a.items.length>0)for(var c=0;c<a.items.length;c++){var d=a.items[c];b+='<option value ="'+d.type+'">'+d.name+"</option>"}else b='<option value="-1">\u6682\u65e0\u6570\u636e\u9009\u9879</option>';return b},getTypeName:function(a){var b="";if(a.items&&a.items.length>0)for(var c=0;c<a.items.length;c++){var d=a.items[c];b+="<th>"+d.name+"</th>"}else b="<th>\u6682\u65e0\u4efb\u4f55\u6570\u636e\u9879</th>";return b},getTypeValue:function(b,c){var d="";if(b.items&&b.items.length>0)for(var e=0;e<b.items.length;e++){var f=b.items[e],g=f[c];g=a.inArray(f.type,u)?(100*parseFloat(g)).toFixed(2)+"%":a.inArray(f.type,v)?parseFloat(g).toFixed(2):parseInt(g),d+="<td>"+g+"</td>"}else d="<td>\u6682\u65e0\u4efb\u4f55\u6570\u636e</td>";return d},eventHandler:function(a){var b=this;k(a).hasClass("hq-set-btn")?b.setHqGoods(a):b.cancelHqGoods(a)},requestGoodsDetail:function(){var a=this;this._request(p.jpccAwardDetail,{},function(b){a.showGoodsDetail(b)})},showGoodsDetail:function(b){var c="",d=0==b.access?'<p class="hq-detail-intro">\u60a8\u6709<span class="red">'+b.noAccessNum+"</span>\u4e2a\u51c6\u5165\u6761\u4ef6\u4e0d\u7b26\u5408\uff0c\u65e0\u6cd5\u83b7\u5f97\u7cbe\u54c1\u6a71\u7a97\u5956\u52b1\uff01</p>":"",f=this.getAwardConditons(b.awardConditions,b.access),g=this.getAccessConditions(b.accessConditions);c=b.accessConditions.length>0||b.awardConditions.length>0?a.substitute(q.detailTpl,{tips:d,accessConditions:g,awardConditions:f}):'<p class="hq-alert-tips">\u6682\u65e0\u4efb\u4f55\u660e\u7ec6\u6d88\u606f</p>',e.alert(c,"\u7cbe\u54c1\u6a71\u7a97\u660e\u7ec6")},getAwardConditons:function(b,c){var d="",e="\u2014\u2014",f=0;
return a.each(b,function(a){e=1==a.status?'<span class="satisfied">\u7b26\u5408</span>':'<span class="no-satisfied">\u4e0d\u7b26\u5408</span>',""!=a.url&&(e+='<a href="'+a.url+'" target="_blank">\u67e5\u770b\u89c4\u5219</a>'),f=a.num,0==c&&(e="\u2014",f="\u2014"),d+="<tr><td>"+a.content+"</td><td>"+e+"</td><td>"+f+"</td></tr>"}),d},getAccessConditions:function(b){var c="",d="\u2014\u2014";return a.each(b,function(a){d=1==a.status?'<span class="satisfied">\u7b26\u5408</span>':'<span class="no-satisfied">\u4e0d\u7b26\u5408</span>',""!=a.url&&""!=a.check&&(d+='<a href="'+a.url+'" target="_blank">'+a.check+"</a>"),c+="<tr><td>"+a.conditon+"</td><td>"+d+"</td></tr>"}),c},showWPicPopup:function(){var a=this;a._request(p.getUploadPic,{id:r,size:200},function(b){a.showWPopupWithImg(!b||1!=b.success&&"true"!=b.success?"":b.value.url)},function(){a.showWPopupWithImg("")})},showWPopupWithImg:function(a){var b=this,c=new f({prefixCls:"tbs-",elCls:"tbs-dialog-popup hqgoods-updata-plugin",content:['<div class="tbs-dialog">','<div class="tbs-dialog-head">\u56fe\u7247\u4e0a\u4f20</div>','<div class="tbs-dialog-body">','  <div id="hqgoods-plugin"></div>','  <div class="hqgoods-plugin-mask J_HqGoodsPluginMask hidden"></div>','  <div class="hqgoods-plugin-mask-con J_HqGoodsPluginMask hidden"><div class="mask-con" id="J_MaskResult"></div></div>','  <div class="p-showbox">','      <div class="p-showbox-title">\u6548\u679c\u56fe\u9884\u89c8\uff1a<span class="J_PluginResultTips result-tips"></span></div>','      <div class="p-showbox-main">','          <div class="p-showbox-img">','              <img class="J_P_ShowBox_Img" src="'+a+'">',"          </div>",'          <div class="p-showbox-info">','              <p>1.\u56fe\u7247\u4e3a\u6b63\u65b9\u5f62\uff0c\u5c3a\u5bf8\u81f3\u5c11\u5927\u4e8e<span class="p-red">500x500px</span>;</p>','              <p>2.\u8bf7\u91c7\u7528<span class="p-red">\u767d\u5e95\u5b9d\u8d1d\u6b63\u9762\u56fe</span>\uff0c\u52ff\u4f7f\u7528\u4eba\u7269\u5934\u50cf\u6a21\u7279\u6216\u5176\u4ed6\u975e\u5b9d\u8d1d\u56fe;</p>','              <p>3.\u5b9d\u8d1d\u56fe\u5e72\u51c0\uff0c\u4e0d\u5e26\u4efb\u4f55\u725b\u76ae\u7663\uff0c\u5b9d\u8d1d\u56fe\u7247\u4e0a<span class="p-red">\u4e0d\u53ef\u51fa\u73b0\u5546\u54c1LOGO\u53ca\u5176\u4ed6\u5229\u76ca\u70b9</span>;</p>',"              <p>4.\u5b9d\u8d1d\u989c\u8272\u5c3d\u91cf\u9971\u6ee1\uff0c\u907f\u514d\u767d\u8272\u6216\u8005\u7070\u8272\u7b49\u5176\u4ed6\u6de1\u8272\uff0c\u5b9d\u8d1d\u5927\u5c0f\u9002\u7528\uff0c\u5207\u5fcc\u4f7f\u7528\u5355\u6839\u9c7c\u7aff\uff0c\u5355\u4e2a\u978b\u5b50\u8fd9\u7c7b\u6784\u56fe\u5947\u602a\u5b9d\u8d1d;</p>",'              <p>5.\u4e00\u5f20\u56fe\u5185\u5b9d\u8d1d\u6570\u5efa\u8bae<span class="p-red">\u6700\u591a\u4e0d\u8d85\u8fc7\u4e24\u6837</span>;</p>',"              <p>6.\u53ea\u80fd\u4e0a\u4f20jpg\u3001png\u3001bmp\u683c\u5f0f\u7684\u56fe\u7247;</p>","          </div>","      </div>","  </div>","</div>","</div>"].join(""),mask:!0,closable:!0,closeAction:"destroy",zIndex:2e4,align:{points:["cc","cc"]}});if(c.show(),window.__picPlugin__)b.uploadPlogin(c);else{var d="//g.alicdn.com",e=-1!==location.hostname.indexOf(".daily.");e&&(d="//g.assets.daily.taobao.net"),g.getScript(d+"/sj/pic/1.3.5/static/seller-v2/js/api.js",function(){b.uploadPlogin(c)})}},uploadPlogin:function(a){var b=this,c=__picPlugin__.init({containerId:"hqgoods-plugin",phone:!0,tab:"upload",singleSelect:!0,maxNum:1,pageSize:10});c.run(),c.on("picInserted",function(a){k(".J_HqGoodsPluginMask").show(),b.showWPopupUpload(),b._request(p.uploadPic,{id:r,url:a[0],size:200},function(a){!a||1!=a.success&&"true"!=a.success?b.showWPopupUploadFail(a.errorMessage):(goldlog.record("/mjzx.32.49","","","H46747621"),k(".J_P_ShowBox_Img").attr("src",a.value.url),b.showWPopupUploadSuccess())},function(){b.showWPopupUploadFail("\u64cd\u4f5c\u5931\u8d25\u8bf7\u7a0d\u540e\u91cd\u8bd5")})}),c.on("heightUpdated",function(){c.importCss("//g.alicdn.com/tb/m-beehive-sns/0.0.2/p/index/index.css"),a.set("align",{points:["cc","cc"]}),a.show()})},showWPopupUpload:function(){k("#J_MaskResult").html('<p class="uploading"><img src="//gw.alicdn.com/tps/i3/TB1cYiaGVXXXXcFXVXXxPfUFXXX-16-16.gif">\u56fe\u7247\u4e0a\u4f20\u4e2d\u2026</p>')},showWPopupUploadFail:function(b){var c=i();k("#J_MaskResult").html('<p class="uploading uploading-fail">'+b+"</p>"),k(".J_PluginResultTips").html("\u60a8\u5728"+c+"\u4e0a\u4f20\u767d\u5e95\u56fe\u5931\u8d25\uff0c"+b).addClass("red"),a.later(function(){k(".J_HqGoodsPluginMask").hide()},3e3)},showWPopupUploadSuccess:function(){var b=i();k("#J_MaskResult").html('<p class="uploading uploading-success">\u4e0a\u4f20\u6210\u529f</p>'),k(".J_PluginResultTips").html("\u60a8\u5728"+b+"\u6210\u529f\u4e0a\u4f20\u4e86\u767d\u5e95\u56fe").addClass("green"),a.later(function(){k(".J_HqGoodsPluginMask").hide()},3e3)},setHqGoods:function(a){var b=this;this.optionHqGoods(a,"add",function(a){if(a.success){var c=new f({prefixCls:"tbs-",elCls:"tbs-dialog-popup hqgoods-updata-plugin",content:['<div class="tbs-dialog">','<div class="tbs-dialog-head">\u7cbe\u54c1\u6a71\u7a97\u8bbe\u7f6e\u6210\u529f</div>','<div class="tbs-dialog-body">','<div class="hq-alert-tips-large">','  <p class="tips-large-line1">\u8bbe\u7f6e\u7cbe\u54c1\u6a71\u7a97\u6210\u529f</p>','  <p class="tips-large-line2">\u4e3a\u7cbe\u54c1\u6a71\u7a97\u5546\u54c1\u8bbe\u7f6e\u767d\u5e95\u56fe\uff0c\u589e\u52a0\u5728\u624b\u6dd8\u9996\u9875\u7684\u66dd\u5149\u673a\u4f1a\uff01<a class="showpicplugin-link" target="_blank" href="//bbs.taobao.com/catalog/thread/16029511-321975073.htm">\u83b7\u53d6\u66f4\u591a\u66dd\u5149\u673a\u4f1a></a></p>',"</div>","</div>",'<div class="tbs-dialog-foot">','  <span class="btn btn-primary btn-sm tbs-dialog-btn tbs-dialog-btn-close J_TBS_D_BtnClose">\u53d6\u6d88</span>','  <span class="btn btn-primary btn-sm tbs-dialog-btn tbs-dialog-btn-set J_TBS_D_BtnSet">\u8bbe\u7f6e\u767d\u5e95\u56fe</span>',"</div>","</div>"].join(""),mask:!0,closable:!0,closeAction:"destroy",zIndex:2e4,align:{points:["cc","cc"]}});c.show(),d.on(j.get(".J_TBS_D_BtnClose"),"click",function(a){a.preventDefault(),c.hide(),c.destroy()}),d.on(j.get(".J_TBS_D_BtnSet"),"click",function(a){goldlog.record("/mjzx.32.47","","","H46747619"),a.preventDefault(),c.hide(),c.destroy(),b.showWPicPopup()})}else e.alert('<p class="hq-alert-tips">'+(a.msg||"\u64cd\u4f5c\u5931\u8d25")+"</p>","\u63d0\u793a")})},cancelHqGoods:function(a){this.optionHqGoods(a,"remove",function(a){a.success?e.alert('<p class="hq-alert-tips">\u53d6\u6d88\u7cbe\u54c1\u6a71\u7a97\u6210\u529f</p>',"\u63d0\u793a",function(){location.reload()}):e.alert('<p class="hq-alert-tips">'+(a.msg||"\u64cd\u4f5c\u5931\u8d25")+"</p>","\u63d0\u793a")})},optionHqGoods:function(a,b,c){var d=k(a).attr("data-id");this._request(p.itemOperation,{type:b,itemId:d},function(a){c&&c(a)})},getHqGoodsNum:function(){this._request(p.HqGoodsNum,{},function(a){a.success&&(k(".J_HqGoodsNum").html(a.value.total||0),k(".J_HqGoodsLeftNum").html(a.value.usedcount||0),k(".J_HqGoodsRewardNum").html(a.value.gmvcount||0))})},cancelRecommend:function(){e.alert('<p class="hq-alert-tips">\u5bf9\u4e8e\u7cbe\u54c1\u6a71\u7a97\u63a8\u8350\u5546\u54c1\uff0c\u8bf7\u5148\u53d6\u6d88\u7cbe\u54c1\u6a71\u7a97\u63a8\u8350\uff0c\u518d\u53d6\u6d88\u6a71\u7a97\u63a8\u8350 !</p>',"\u63d0\u793a")},_request:function(b,c,d,e){a.io({url:b,data:c,dataType:"jsonp",callback:"jsonp",success:function(a){d&&d(a)},error:function(){e&&e(),a.log("\u8bf7\u6c42"+b+"\u5931\u8d25")}})}};return w},{requires:["dom","node","event","../com/dialog","overlay","ajax"]}),KISSY.add("v2/source/service/list_v2",function(a){var b=a.DOM,c=a.Event;return{init:function(){var a=b.get("#J_DataTable");if(a){var d=b.query("div.alert-tips",a);if(d&&d.length)for(var e;e=d.shift();)this.tips(e);var f=b.query("input.selector",a),g=b.query("a.selector-btn",a);c.on(g,"mousedown",function(){for(var a,b=0;a=f[b];b++)a.checked=a.value!=this.getAttribute("data-id")?!1:!0})}},tips:function(a){var d=b.get(".alert-tips-close",a),e=b.get(".alert-tips-btn",a);c.on(d,"click",function(c){b.remove(a),c.preventDefault(),c.stopPropagation()}),c.on(e,"click",function(c){var d=this.getAttribute("data-confirm"),e=this.getAttribute("data-url");e&&(d&&confirm(d)||!d)&&window.open(e),b.remove(a),c.preventDefault(),c.stopPropagation()})}}}),KISSY.add("v2/source/service/list_v3",function(a){var b=a.DOM,c=a.Event;return{init:function(){var d=b.get("#showcase-btn"),e=b.get("#showcase-input");if(d&&e){var f="//assets.alicdn.com/s/kissy/";"sell.daily.taobao.net"==document.domian&&(f="//assets.daily.taobao.net/s/kissy/"),a.config({packages:[{name:"gallery",path:f,charset:"utf-8"}]}),KISSY.use("tbc/showcase/0.0.2/index, node",function(a,b){var f=e.value;c.on(d,"click",function(a){a.preventDefault(),b.autoShowcase.show(f)}),b.autoShowcase.on("setShowcase:success",function(){setTimeout(function(){document.location.reload()},3e3)})})}}}}),KISSY.add("v2/source/service/cuntao",function(a,b){var c=a.all;return{init:function(){this._bindEvent()},_bindEvent:function(){var a=this,b=c(".J_Cuntao"),d=b.length;d&&b.on("click",function(b){var d=c(this),e=d.attr("data-itemid");b.halt(),a.popup(e)}),c(window).on("message",function(b){switch(b.data){case"cuntao.close":a.dialog&&a.dialog.hide();break;case"cuntao.refresh":a.dialog&&a.dialog.hide(),window.location.reload()}})},popup:function(a){var c=location.host.indexOf("daily.taobao.net")>-1,d=c?"cunsupplier.daily.taobao.net":"cunsupplier.taobao.com",e="/auction/cuntao/sellNestedForm.htm?itemId=",f=["//",d,e,a].join(""),g='<h2 class="overlay-title"><a class="close">X</a>\u8bbe\u7f6e\u519c\u6751\u6dd8\u5b9d\u670d\u52a1\u8d39\u6bd4\u4f8b</h2>',h='<iframe src="'+f+'"  frameborder=\u201dno\u201d border=\u201d0\u2033 scrolling=\u201dno\u201d></iframe>',i={headerContent:g,bodyContent:h,elCls:"cuntao-overlay hint-default hint-overlay",mask:!0,width:550,closable:!1,zIndex:999999,closeAction:"destroy",align:{node:null,points:["cc","cc"],offset:[0,0]}};this.dialog=new b.Dialog(i),this.dialog.on("afterRenderUI",function(){var a=this,b=a.get("el");b.delegate("click",".close",function(){a.hide()})}),this.dialog.show()}}},{requires:["overlay"]}),KISSY.add("v2/service/main",function(a){var b=a.makeArray(arguments);a.ready(function(){for(var a=1;a<b.length;a++){var c=b[a]||{};c.init&&c.init()}})},{requires:["v2/source/service/searcharea","v2/source/service/lessquantity","v2/source/service/itemoperator","v2/source/service/itemsmanager","v2/source/service/qrcode","v2/source/service/recommend","v2/source/service/page","v2/source/service/mobileDesc","v2/source/service/weituan","v2/source/other/goodsRecommend","v2/source/service/hqGoods","v2/source/service/list_v2","v2/source/service/list_v3","v2/source/service/cuntao"]});