KISSY.add("seller/c/template/init",function(e){function n(n){if(!t[n]){var r,i,a=e.guid(u),s=[g,a,d,i=T(n),S];try{r=new Function(a,s.join(""))}catch(o){s[3]=c+f+l+","+o.message+c+f,r=new Function(a,s.join(""))}t[n]={name:a,o:i,parser:s.join(""),render:r}}return t[n]}var t={},r={"#":"start","@":"start","/":"end"},i="KS_TEMPL_STAT_PARAM",a=new RegExp(i,"g"),s="KS_TEMPL",u="KS_DATA_",o="as",c='");',f=s+'.push("',l="KISSY.Template: Syntax Error. ",p="KISSY.Template: Render Error. ",g="var "+s+"=[],"+i+"=false;with(",d="||{}){try{"+s+'.push("',S='");}catch(e){'+s+'=["'+p+'" + e.message]}};return '+s+'.join("");',m=function(e){return e.replace(/\\"/g,'"')},h=function(e){return e.replace(/"/g,'\\"')},_=e.trim,T=function(n){var t,i;return h(_(n).replace(/[\r\t\n]/g," ").replace(/\\/g,"\\\\")).replace(/\{\{([#\/@]?)(?!\}\})([^}]*)\}\}/g,function(n,u,o){if(t="",o=m(_(o)),u){i=o.indexOf(" "),o=-1===i?[o,""]:[o.substring(0,i),o.substring(i)];var l,p=o[0],g=_(o[1]),d=v[p];d&&r[u]&&(l=d[r[u]],t=String(e.isFunction(l)?l.apply(this,g.split(/\s+/)):l.replace(a,g)))}else t=s+".push(typeof ("+o+') ==="undefined"?"":'+o+");";return c+t+f})},v={"if":{start:"if(typeof ("+i+') !=="undefined" && '+i+"){",end:"}"},"else":{start:"}else{"},elseif:{start:"}else if("+i+"){"},each:{start:function(e,n,t,r){var i="_ks_value",a="_ks_index";return n===o&&t&&(i=t||i,a=r||a),"KISSY.each("+e+", function("+i+", "+a+"){"},end:"});"},"!":{start:"/*"+i+"*/"}};return e.mix(n,{log:function(r){r in t?e.log(t[r].parser,"info"):(n(r),this.log(r))},addStatement:function(n,t){"string"==typeof n?v[n]=t:e.mix(v,n)}}),e.Template=n,n});KISSY.version>"1.4"&&KISSY.config("modules",{flash:{alias:["gallery/flash/1.0/"]}});var TB=window.TB||{};!function(){function e(e,a,t){t=t||e;for(var o=0,n=e.length;n>o;o++)a.call(t,e[o],o,e)}function a(e){if(v.userCookie&&"undefined"!=typeof v.userCookie[e])return v.userCookie[e];var a=h.cookie.match("(?:^|;)\\s*"+e+"=([^;]*)");return T[e]=a&&a[1]?decodeURIComponent(a[1]):I,T[e]}function t(e){var a=h.createElement("div"),t=h.createTextNode(e);return a.appendChild(t),a.innerHTML}function o(e,a,t){var o,n,l=t.getElementsByTagName(a||"*"),r=[],i=0,s=0,c=l.length;for(e=w+e+w;c>i;++i)o=l[i],n=o.className,n&&(w+n+w).indexOf(e)>-1&&(r[s++]=o);return r}function n(e,a,t,o){e&&(e.addEventListener?e.addEventListener(a,t,!!o):e.attachEvent&&e.attachEvent("on"+a,t))}function l(e,a){var t=w+e.className+w;-1===t.indexOf(w+a+w)&&(t+=a,e.className=i(t))}function r(e,a){var t=w+e.className+w;-1!==t.indexOf(w+a+w)&&(t=t.replace(w+a+w,w),e.className=i(t))}function i(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function s(e){return(e||"")+x++}function c(e){var a="&";v.userCookie&&"2"==v.userCookie.version&&(a="&amp;");for(var t,o=e.split(a),n=0,l=o.length,r={};l>n;n++)t=o[n].split("="),r[t[0]]=decodeURIComponent(t[1]||"");return r}function d(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var u,p,m=!"0"[0],f=m&&!window.XMLHttpRequest,g=!!window.ActiveXObject,h=document,v=window,w=" ",b="hover",_=("g_config"in v&&"appId"in v.g_config?parseInt(v.g_config.appId):void 0,location.hostname.split(".")),y=h.domain,S=!(y.indexOf("taobao.com")>-1),I="",k=0===h.location.href.indexOf("https://"),T={},C={siteNav:function(){p&&(p.setAttribute("role","navigation"),e(o("menu","*",p),function(e){TB.SellerGlobal._addMenu(e)}))},initHeaderLinks:function(){if(-1!==y.indexOf(".taobao.net")){for(var e=p?p.getElementsByTagName("a"):[],a=0,t=e.length,o=_;o.length>3;)o.shift();for(o=o.join(".");t>a;a++)e[a].href=e[a].href.replace("taobao.com",o)}},initLogout:function(){var e=h.getElementById("#J_Logout");e&&n(e,"click",function(a){d(a);var t=e.href;(new Image).src="//taobao.alipay.com/user/logout.htm",setTimeout(function(){location.href=t},20)})}};TB.SellerGlobal={_addMenu:function(a){if(a){var t=this,i=o("menu-hd","*",a)[0],c=o("menu-bd","*",a)[0];if(c&&i){i.tabIndex=0,t._subMenus.push(c),c.setAttribute("role","menu"),c.setAttribute("aria-hidden","true"),c.getAttribute("id")||c.setAttribute("id",s("menu-")),i.setAttribute("aria-haspopup",c.getAttribute("id")),i.setAttribute("aria-label","\u53f3\u952e\u5f39\u51fa\u83dc\u5355\uff0ctab\u952e\u5bfc\u822a\uff0cesc\u5173\u95ed\u5f53\u524d\u83dc\u5355");var u=!1;!k&&f&&(u=h.createElement("iframe"),u.src="about: blank",u.className="menu-bd",a.insertBefore(u,c)),n(a,"mouseover",function(o){for(var n=o.relatedTarget;n&&n!==a;)n=n.parentNode;if(n!==a){if(e(t._subMenus,function(e){e!==c&&(r(e.parentNode,b),e.setAttribute("aria-hidden","true"))}),l(a,b),c.setAttribute("aria-hidden","false"),!u)return;u.style.height=parseInt(c.offsetHeight)+25+"px",u.style.width=parseInt(c.offsetWidth)+1+"px"}}),n(a,"mouseout",function(t){for(var o=t.relatedTarget;o&&o!==a;)o=o.parentNode;o!==a&&(r(a,b),c.setAttribute("aria-hidden","true"),e(c.getElementsByTagName("input"),function(e){"hidden"!==e.getAttribute("type")&&e.blur()}))}),n(a,"keydown",function(e){var t=e.keyCode;27==t||37==t||38==t?(r(a,b),c.setAttribute("aria-hidden","true"),i.focus(),d(e)):(39==t||40==t)&&(l(a,b),c.setAttribute("aria-hidden","false"),d(e))});var p;n(a,g?"focusin":"focus",function(){p&&(clearTimeout(p),p=null)},!g),n(a,g?"focusout":"blur",function(){p=setTimeout(function(){r(a,b),c.setAttribute("aria-hidden","true")},100)},!g)}}},init:function(e){u=S?"assets.daily.taobao.net":"assets.alicdn.com",p=h.getElementById("seller-nav"),this.config=e,this._subMenus=[];for(var a in C)C[a]()},writeLoginInfo:function(e,o){e=e||{};var n,l,r,i,s,d=this,u=a("_nk_")||a("tracknick"),p=c(a("uc1")),m=parseInt(p._msg_)||0,f=(new Date).getTime(),g="//login.taobao.com",v=e.memberServer||"//member1.taobao.com",w=e.outmemServer||"//outmem.taobao.com",b=e.loginServer||"//login.taobao.com",_=e.loginUrl||b+"/member/login.jhtml?f=top",y=location.href,S=I;if(""!=e.loginParam&&(_+="&"+e.loginParam),/^http.*(\/member\/login\.jhtml)$/i.test(y)&&(y=I),n=e.redirectUrl||y,n&&(_+="&redirectURL="+encodeURIComponent(n)),l=e.logoutUrl||g+"/member/logout.jhtml?f=top",r=v+"/member/newbie.htm",i=w+"/message/list_private_msg.htm?t="+f,s="//jianghu.taobao.com/admin/home.htm?t="+f,d.isLogin()?(S='<a class="user-nick" href="'+s+'" target="_top">'+t(unescape(u.replace(/\\u/g,"%u")))+'</a>, <a id="J_Logout" href="'+l+'" target="_top">\u9000\u51fa</a><a href="'+i+'" target="_top">\u7ad9\u5185\u4fe1',m&&(S+="("+m+")"),S+="</a>"):(S='\u4eb2\uff0c\u6b22\u8fce\u6765\u6dd8\u5b9d\uff01<a href="'+_+'" target="_top">\u8bf7\u767b\u5f55</a>',S+='<a href="'+r+'" target="_top">\u514d\u8d39\u6ce8\u518c</a>'),o){var k=document.getElementById("site-nav");if(k){var T=k.getElementsByTagName("p")[0];T&&"login-info"===T.className&&(T.innerHTML=S)}}else h.write(S)},isLogin:function(){var e=a("tracknick"),t=a("_nk_")||e;return!!(a("_l_g_")&&t||a("ck1")&&e)}};var x=100}(),KISSY.ready(function(e){var e=KISSY;if(location.href.indexOf(":6001")>-1)var a="//local.daily.taobao.net:6001";else if(location.href.indexOf("taobao.net")>-1)var a="//myseller.daily.taobao.net";else var a="//myseller.taobao.com";var t=a+"/jsonp/seller_sidebar.do",o=a+"/jsonp/get_unread_num.do",n=a+"/jsonp/set_read_all.do",l=a+"/jsonp/show_banner_by_category.do",r=window.location.search;r.indexOf("tb_eagleeyex_t")>-1&&(t+=r,o+=r,n+=r,l+=r);var i='<ul data-spm="a1zvx">        {{#each categories as cat catIndex}}        <li class="category{{#if catIndex===(categories.length-1)}} last-category{{/if}}">            <div class="category-name"><span class="category-icon">{{cat.icon}}</span>{{cat.name}}{{#if (hasShop && (cat.id > 0))}}<a href="'+a+'/apps_manage.htm#category_{{cat.id}}" class="custom-entry" data-spm="dc{{cat.id}}" data-id="{{cat.id}}">\u81ea\u5b9a\u4e49</a>{{/if}}<span class="icon J_AppToggle" data-id="{{cat.id}}" unselectable="on"><b class="close">&#xe609;</b><b class="open">&#xe60c;</b></span></div>            <ol class="category-app clearfix J_Category_{{cat.id}}">            {{#each cat.apps.shortcut as app appIndex}}            <li class="common-app"><a href="{{app.url}}" {{#if (app.appType===3)}}target="_blank"{{/if}} title="{{app.name}}" data-spm="d{{app.appId}}">{{app.name}}</a></li>            {{/each}}            {{#each cat.apps.simple as app appIndex}}            <li class="normal-app"><a href="{{app.url}}" {{#if (app.appType===3)}}target="_blank"{{/if}} title="{{app.name}}" data-spm="d{{app.appId}}">{{app.name}}</a></li>            {{/each}}            </ol>        </li>        {{/each}}    </ul>',s='<div class="catrgory-load-error">            <p>\u52a0\u8f7d\u5931\u8d25\uff0c\u70b9\u51fb<a href="javascript:void(0);" class="J_ReloadSellerMenu">\u91cd\u8bd5</a></p>        </div>';e.use("node,ajax,cookie,json,seller/c/template/init",function(e,a,l,r,c,d){function u(a,t,o){var n="seller_"+ +new Date+parseInt(100*Math.random(),10);window[n]=t;var l="?callback="+n;a.indexOf("?")>-1&&(l="&callback="+n),e.getScript(a+l,{success:function(){},timeout:10,error:function(){o&&o()}})}function p(){S(".J_AppList").addClass("loading").html("");var e=S(".J_AppList").hasClass("has-shop");u(t,function(a){if("1"==a.status){var t=a.data;t.hasShop=e,m(t),g(t)}else f(),h()},function(){f(),h()})}function m(e){S(".J_AppList").removeClass("loading").html(new d(i).render(e))}function f(){S(".J_AppList").removeClass("loading").html(s)}function g(e){"localStorage"in window&&null!==window.localStorage&&window.localStorage&&window.localStorage.setItem(k,c.stringify(e))}function h(){if("localStorage"in window&&null!==window.localStorage)var e=window.localStorage&&window.localStorage.getItem(k);e&&(e=c.parse(e),m(e))}function v(){if("localStorage"in window&&null!==window.localStorage){var e=window.localStorage&&window.localStorage.getItem(k+"num_")||1,a=(parseInt(e)+1)%2;window.localStorage&&window.localStorage.setItem(k+"num_",a),"0"===e?h():p()}else p()}function w(e){window.goldlog&&window.goldlog.record("/tbdpyy.8.1.16.1","","","H46896547"),T||(T=S('<iframe frameborder="no" width="680" height="360" scrolling="no" src="'+e+'"></iframe>'),T.prependTo(".seller-sidebar-ordered-app-popup-content"),S(".seller-sidebar-ordered-app-popup-content").on("mousewheel DOMMouseScroll",function(e){var a=e.wheelDelta||-e.detail;this.scrollTop+=30*(0>a?1:-1),e.preventDefault()}),C.removeClass("loading")),C.fadeIn(.15,function(){x=!0})}function b(){window.goldlog&&window.goldlog.record("/tbdpyy.8.1.16.2","","","H46896569"),C.fadeOut(.15,function(){x=!1})}function _(){u(o,function(e){e.data>0&&S('<i class="new-msg"></i>').appendTo(".J_SellerFeedBackEntry")})}function y(){u(n)}var S=a.all,I=decodeURIComponent(r.get("_nk_")),k="_s_"+I+"_m_";!function(){v(),S("#page").delegate("click",".J_AppOrdered",function(e){e.preventDefault();var a=S(e.currentTarget).attr("data-uri");1==x?b():w(a)}).delegate("click",".J_AppToggle",function(e){e.preventDefault();var a=e.currentTarget,t=S(a).parent(".category"),o=S(a).attr("data-id");t.hasClass("show-more")?window.goldlog&&window.goldlog.record("/tbdpyy.8.1.2","cat="+o,"H46807196"):window.goldlog&&window.goldlog.record("/tbdpyy.8.1.1","","cat="+o,"H46807174"),t.toggleClass("show-more")}).delegate("click",".J_CloseSellerSidebarPopup",function(e){e.preventDefault(),b()}).delegate("click",".J_ReloadSellerMenu",function(){p()})}();var T,C=S(".seller-sidebar-ordered-app-popup"),x=!1;!function(){_(),S(document).delegate("click",".J_SellerFeedBackEntry",function(e){var a=e.currentTarget;S(a).one(".new-msg")&&(y(),S(a).one(".new-msg").remove())})}(),function(){S(document).delegate("mouseenter",".seller-map-cell",function(e){var a,t=S("#seller-nav"),o=e.currentTarget;a="1"===S(o).attr("data-index")?"seller-map-column-show-top":"2"===S(o).attr("data-index")?"seller-map-column-show-middle":"seller-map-column-show-bottom",t.all(".seller-map-column-show-top").removeClass("seller-map-column-show-top"),t.all(".seller-map-column-show-middle").removeClass("seller-map-column-show-middle"),t.all(".seller-map-column-show-bottom").removeClass("seller-map-column-show-bottom"),S(o).parent(".seller-map-column").addClass(a)}).delegate("mouseleave",".seller-map-wrapper",function(e){var a=S("#seller-nav");a.all(".seller-map-column-show-top").removeClass("seller-map-column-show-top"),a.all(".seller-map-column-show-middle").removeClass("seller-map-column-show-middle"),a.all(".seller-map-column-show-bottom").removeClass("seller-map-column-show-bottom")})}()})});